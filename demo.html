<!doctype html>
<!--
 - @author: Storm
 - @date: 2019-03-15
 - @email: wenyejie@foxmail.com
 -->
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <title>Demo</title>
</head>
<body>
  <script>
  class A {
    constructor () {

    }
  }

  const singletonify = OriginalClass => {
    let instance = new OriginalClass()

    class NewClass extends OriginalClass {
      constructor () {
        super()
        return instance
      }
    }

    Object.setPrototypeOf(instance, NewClass.prototype)

    return NewClass
  }

  const SingleA = singletonify(A)

  const a1 = new SingleA()
  const a2 = new SingleA()
  </script>
</body>
</html>
